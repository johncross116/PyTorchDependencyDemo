<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>PyTorch import demo</title>
    <link rel="icon" href="images/oaicon.ico" type="image/x-icon">

    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/css/flatly.custom.min.css" />
    <link rel="stylesheet" type="text/css" href="/css/main.css" />

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.2/css/fontawesome.css"
      integrity="sha384-4aon80D8rXCGx9ayDt85LbyUHeMWd3UiBaWliBlJ53yzm9hqN21A+o1pqoyK04h+"
      crossorigin="anonymous"
    />

    <!-- <script src="https://cdn.auth0.com/js/auth0-spa-js/1.22/auth0-spa-js.production.js"></script> -->
    <script src="js/app.js"></script>
  </head>

  <body>

    <div class="container">
      <div class="page-header" id="banner">
        <div class="row">
          <div class="col-sm-9">
            <p></p>
            <h1>PyTorch dependency demo</h1>
            
          </div>
        </div>
      </div>

      <div class="bs-docs-section">
        <div class="row">
          <div class="col-sm-12">
            <div id="error-box" style="display:none">
                <div class="alert alert-dismissible alert-danger">
                  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                  <p></p>
                </div>
            </div>
          </div>
        </div>
      </div>

      <div class="bs-docs-section">
        <div class="row">
          <div class="col-sm-3">
            

            <div class="d-grid gap-2">
              <button id="step-4-btn" class="btn btn-info w-80" onclick="startPython()">Call Python</button>
            </div>

            <div class="card border-info mb-3 mt-3" style="max-width: 20rem;">
              <div class="card-body">
                <h5 class="card-title" id="result-text"></h5>
              </div>
            </div>
          </div>

        </div>
      </div>


      <footer id="footer">
        <div class="row">
          <div class="col-lg-12">
          </div>
        </div>
      </footer>
    </div>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery-3.6.0.min.js"></script>

    <script>
      
      var selectedImage = 'image';
      
      async function startPython() {
        let resultText = '';
        let resultBox = document.getElementById('result-text');
        resultBox.textContent = resultText;

        resultText = await runStep4();

        if (true || resultText.toLowerCase().includes('error')) {
          displayError(resultText);
        }
      }

      function displayError(errorMessage) {
        const errorBox = document.getElementById("error-box");
        
        // Remove existing content if any
        errorBox.innerHTML = ''; 

        // Recreate the alert content
        errorBox.innerHTML = `
            <div class="alert alert-dismissible alert-danger">
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                <p>${errorMessage}</p>
            </div>
        `;

        // Show the alert
        errorBox.style.display = "block"; 
      }

  </script>
  

</body>
</html>
